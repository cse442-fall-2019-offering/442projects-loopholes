{"ast":null,"code":"import _slicedToArray from \"/Users/kaibus/Fall19/CSE442/UBulletinMain/UBulletin/442projects-loopholes/Frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/kaibus/Fall19/CSE442/UBulletinMain/UBulletin/442projects-loopholes/Frontend/src/components/templateGenerator.js\";\nimport React, { useState, useRef } from 'react';\nimport ImageUploader from \"../firebase/ImageUploader\";\nimport { Button, Modal } from 'react-bootstrap';\nimport 'filepond/dist/filepond.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport domtoimage from 'dom-to-image-more'; //link - /CSE442-542/2019-Fall/cse-442i/template\n\nexport default function TemplateGenerator() {\n  const _useState = useState([]),\n        _useState2 = _slicedToArray(_useState, 2),\n        images = _useState2[0],\n        setImages = _useState2[1];\n\n  const _useState3 = useState(require('../components/testimages/uploadImagePlaceholder.png')),\n        _useState4 = _slicedToArray(_useState3, 2),\n        currentImage = _useState4[0],\n        setCurrentImage = _useState4[1];\n\n  const _useState5 = useState(''),\n        _useState6 = _slicedToArray(_useState5, 2),\n        topText = _useState6[0],\n        setTopText = _useState6[1];\n\n  const _useState7 = useState(''),\n        _useState8 = _slicedToArray(_useState7, 2),\n        bottomText = _useState8[0],\n        setBottomText = _useState8[1];\n\n  const _useState9 = useState(false),\n        _useState10 = _slicedToArray(_useState9, 2),\n        isMemeGenerated = _useState10[0],\n        setIsMemeGenerated = _useState10[1];\n\n  let contentContainerRef = useRef(null);\n  let resultContainerRef = useRef(null);\n\n  function addText(e) {\n    if (e.target.name === 'topText') {\n      setTopText(e.target.value);\n    } else {\n      setBottomText(e.target.value);\n    }\n  }\n\n  function uploadImage(event) {\n    setCurrentImage(URL.createObjectURL(event.target.files[0]));\n  }\n\n  function uploadToFirebse() {\n    let sender = new ImageUploader();\n  }\n\n  function handlePosterGeneration() {\n    if (resultContainerRef.current.childNodes.length > 0) {\n      resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0]);\n    }\n\n    domtoimage.toPng(contentContainerRef.current).then(dataUrl => {\n      const img = new Image();\n      img.src = dataUrl;\n      resultContainerRef.current.appendChild(img);\n      let sender = new ImageUploader(img);\n      sender.sendImageToFirebaseStorage();\n    });\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    name: \"topText\",\n    placeholder: \"Top Text\",\n    type: \"text\",\n    value: topText,\n    onChange: addText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    name: \"bottomText\",\n    placeholder: \"Bottom Text\",\n    type: \"text\",\n    value: bottomText,\n    onChange: addText,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 62\n    },\n    __self: this\n  }), React.createElement(\"button\", {\n    onClick: handlePosterGeneration,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"Create post\"), React.createElement(\"div\", {\n    className: \"editImageField\",\n    ref: contentContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(\"h1\", {\n    style: {\n      position: 'absolute'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, topText), React.createElement(\"img\", {\n    style: {\n      maxWidth: 600,\n      paddingTop: 20\n    },\n    src: currentImage,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }), React.createElement(\"label\", {\n    variant: \"primary\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  }, \"Upload\", React.createElement(\"input\", {\n    type: \"file\",\n    accept: \".jpg, .jpeg, .png\",\n    onChange: uploadImage,\n    hidden: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  })), React.createElement(\"h2\", {\n    style: {\n      position: 'relative',\n      bottom: 60\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 88\n    },\n    __self: this\n  }, bottomText), React.createElement(\"div\", {\n    ref: resultContainerRef,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92\n    },\n    __self: this\n  })));\n}","map":{"version":3,"sources":["/Users/kaibus/Fall19/CSE442/UBulletinMain/UBulletin/442projects-loopholes/Frontend/src/components/templateGenerator.js"],"names":["React","useState","useRef","ImageUploader","Button","Modal","domtoimage","TemplateGenerator","images","setImages","require","currentImage","setCurrentImage","topText","setTopText","bottomText","setBottomText","isMemeGenerated","setIsMemeGenerated","contentContainerRef","resultContainerRef","addText","e","target","name","value","uploadImage","event","URL","createObjectURL","files","uploadToFirebse","sender","handlePosterGeneration","current","childNodes","length","removeChild","toPng","then","dataUrl","img","Image","src","appendChild","sendImageToFirebaseStorage","position","maxWidth","paddingTop","bottom"],"mappings":"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","sourcesContent":["import React, {useState, useRef} from 'react';\nimport ImageUploader from \"../firebase/ImageUploader\";\nimport {Button, Modal} from 'react-bootstrap';\nimport 'filepond/dist/filepond.min.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport domtoimage from 'dom-to-image-more'\n\n//link - /CSE442-542/2019-Fall/cse-442i/template\nexport default function TemplateGenerator(){\n\n    const [images, setImages] = useState([])\n    const [currentImage, setCurrentImage] = useState(require('../components/testimages/uploadImagePlaceholder.png'))\n    const [topText, setTopText] = useState('')\n    const [bottomText, setBottomText] = useState('')\n    const [isMemeGenerated, setIsMemeGenerated] = useState(false)\n\n  let contentContainerRef = useRef(null)\n  let resultContainerRef = useRef(null)\n\n   function addText(e) {\n    if(e.target.name === 'topText'){\n      setTopText(e.target.value)\n    }else{\n      setBottomText(e.target.value)\n    }\n  }\n\n  function uploadImage(event){\n    setCurrentImage(URL.createObjectURL(event.target.files[0]))\n  }\n\n  function uploadToFirebse(){\n    let sender = new ImageUploader()\n  }\n\n  function handlePosterGeneration() {\n    if (resultContainerRef.current.childNodes.length > 0) {\n      resultContainerRef.current.removeChild(resultContainerRef.current.childNodes[0])\n    }\n\n    domtoimage.toPng(contentContainerRef.current).then((dataUrl) => {\n      const img = new Image()\n      img.src = dataUrl\n      resultContainerRef.current.appendChild(img)\n\n      let sender = new ImageUploader(img)\n      sender.sendImageToFirebaseStorage();\n    })\n}\n\n\n    return(\n      <div>\n        <input\n            name=\"topText\"\n            placeholder=\"Top Text\"\n            type=\"text\"\n            value={topText}\n            onChange={addText}\n          />\n\n        <input\n            name=\"bottomText\"\n            placeholder=\"Bottom Text\"\n            type=\"text\"\n            value={bottomText}\n            onChange={addText}\n          />\n\n          <button\n          onClick={handlePosterGeneration}>\n            Create post\n          </button>\n\n          <div className=\"editImageField\" ref={contentContainerRef}>\n            <h1 style={{position: 'absolute'}}>{topText}</h1>\n\n            <img\n              style={{maxWidth: 600, paddingTop: 20}}\n              src={currentImage}/>\n\n              <label\n              variant=\"primary\"  >\n                  Upload\n                <input type=\"file\" accept=\".jpg, .jpeg, .png\" onChange={uploadImage} hidden/>\n              </label>\n\n              <h2 style={{position: 'relative', bottom: 60}}>{bottomText}</h2>\n\n\n\n              <div ref={resultContainerRef}></div>\n\n            </div>\n      </div>\n    )\n  }\n"]},"metadata":{},"sourceType":"module"}