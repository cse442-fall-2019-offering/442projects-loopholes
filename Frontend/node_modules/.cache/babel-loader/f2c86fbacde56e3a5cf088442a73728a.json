{"ast":null,"code":"var _jsxFileName = \"/Users/hansbas/Documents/University at Buffalo/2019-2020/Fall 2019/CSE 442/442projects-loopholes/Frontend/src/components/homepage.js\";\nimport React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport HomepageCard from './homepageCard';\nimport * as Endpoint from '../constants/Endpoint';\nimport ImageUploader from '../firebase/ImageUploader';\nimport { getTimestampImageString } from '../util/helper-functions/timestamp';\n\nclass HomePage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.uploadFile = async e => {\n      const uploader = new ImageUploader(e.target.files[0], \"\".concat(getTimestampImageString(), \".jpg\"));\n      await uploader.sendImageToFirebaseStorage();\n    };\n\n    this.state = {\n      page: this.props.page,\n      message: \"\",\n      imageLinks: []\n    };\n  }\n\n  componentDidMount() {\n    fetch(process.env.REACT_APP_BACKEND_API + Endpoint.GET_HOMEPAGE_IMAGE_METADATA).then(res => res.json()).then(data => {\n      let imageMetadata = [];\n\n      for (let key in data) {\n        imageMetadata.push(data[key]['image_link']);\n      }\n\n      this.setState({\n        imageLinks: imageMetadata\n      });\n    });\n  }\n\n  render() {\n    let images = this.state.imageLinks.map(link => React.createElement(\"img\", {\n      src: link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38\n      },\n      __self: this\n    }));\n    let cards = this.state.imageLinks.map(link => React.createElement(HomepageCard, {\n      imageLink: link,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39\n      },\n      __self: this\n    }));\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    }, this.state.message, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }), React.createElement(\"input\", {\n      type: \"file\",\n      onChange: this.uploadFile,\n      accept: \"image/*\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 45\n      },\n      __self: this\n    }), React.createElement(CardColumns, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, cards));\n  }\n\n}\n\nexport default HomePage;","map":{"version":3,"sources":["/Users/hansbas/Documents/University at Buffalo/2019-2020/Fall 2019/CSE 442/442projects-loopholes/Frontend/src/components/homepage.js"],"names":["React","CardColumns","HomepageCard","Endpoint","ImageUploader","getTimestampImageString","HomePage","Component","constructor","props","uploadFile","e","uploader","target","files","sendImageToFirebaseStorage","state","page","message","imageLinks","componentDidMount","fetch","process","env","REACT_APP_BACKEND_API","GET_HOMEPAGE_IMAGE_METADATA","then","res","json","data","imageMetadata","key","push","setState","render","images","map","link","cards"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,sCAAP;AACA,OAAOC,WAAP,MAAwB,6BAAxB;AACA,OAAOC,YAAP,MAAyB,gBAAzB;AACA,OAAO,KAAKC,QAAZ,MAA0B,uBAA1B;AACA,OAAOC,aAAP,MAA0B,2BAA1B;AACA,SAASC,uBAAT,QAAwC,oCAAxC;;AAEA,MAAMC,QAAN,SAAuBN,KAAK,CAACO,SAA7B,CAAuC;AACnCC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,UAAMA,KAAN;;AADe,SAqBnBC,UArBmB,GAqBN,MAAOC,CAAP,IAAa;AACxB,YAAMC,QAAQ,GAAG,IAAIR,aAAJ,CAAkBO,CAAC,CAACE,MAAF,CAASC,KAAT,CAAe,CAAf,CAAlB,YAAwCT,uBAAuB,EAA/D,UAAjB;AACA,YAAMO,QAAQ,CAACG,0BAAT,EAAN;AACD,KAxBkB;;AAEf,SAAKC,KAAL,GAAa;AACTC,MAAAA,IAAI,EAAE,KAAKR,KAAL,CAAWQ,IADR;AAETC,MAAAA,OAAO,EAAE,EAFA;AAGTC,MAAAA,UAAU,EAAE;AAHH,KAAb;AAKH;;AAEDC,EAAAA,iBAAiB,GAAG;AAClBC,IAAAA,KAAK,CAACC,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GAAoCrB,QAAQ,CAACsB,2BAA9C,CAAL,CACCC,IADD,CACMC,GAAG,IAAIA,GAAG,CAACC,IAAJ,EADb,EAECF,IAFD,CAEMG,IAAI,IAAI;AACZ,UAAIC,aAAa,GAAG,EAApB;;AACA,WAAK,IAAIC,GAAT,IAAgBF,IAAhB,EAAsB;AACpBC,QAAAA,aAAa,CAACE,IAAd,CAAmBH,IAAI,CAACE,GAAD,CAAJ,CAAU,YAAV,CAAnB;AACD;;AACD,WAAKE,QAAL,CAAc;AAAEd,QAAAA,UAAU,EAAEW;AAAd,OAAd;AACD,KARD;AASD;;AAODI,EAAAA,MAAM,GAAE;AAEN,QAAIC,MAAM,GAAG,KAAKnB,KAAL,CAAWG,UAAX,CAAsBiB,GAAtB,CAA0BC,IAAI,IAAI;AAAK,MAAA,GAAG,EAAEA,IAAV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAlC,CAAb;AACA,QAAIC,KAAK,GAAG,KAAKtB,KAAL,CAAWG,UAAX,CAAsBiB,GAAtB,CAA0BC,IAAI,IAAI,oBAAC,YAAD;AAAc,MAAA,SAAS,EAAEA,IAAzB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAAlC,CAAZ;AAEE,WACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,KAAKrB,KAAL,CAAWE,OADd,EAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFA,EAGA;AAAO,MAAA,IAAI,EAAC,MAAZ;AAAmB,MAAA,QAAQ,EAAE,KAAKR,UAAlC;AAA8C,MAAA,MAAM,EAAC,SAArD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHA,EAIA,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG4B,KADH,CAJA,CADQ;AAUH;;AA1CkC;;AA4CvC,eAAehC,QAAf","sourcesContent":["import React from 'react';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport CardColumns from 'react-bootstrap/CardColumns';\nimport HomepageCard from './homepageCard';\nimport * as Endpoint from '../constants/Endpoint';\nimport ImageUploader from '../firebase/ImageUploader';\nimport { getTimestampImageString } from '../util/helper-functions/timestamp';\n\nclass HomePage extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            page: this.props.page,\n            message: \"\",\n            imageLinks: []\n        }\n    }\n\n    componentDidMount() {\n      fetch(process.env.REACT_APP_BACKEND_API + Endpoint.GET_HOMEPAGE_IMAGE_METADATA)\n      .then(res => res.json())\n      .then(data => {\n        let imageMetadata = [];\n        for (let key in data) {\n          imageMetadata.push(data[key]['image_link']);\n        }\n        this.setState({ imageLinks: imageMetadata });\n      });\n    }\n\n    uploadFile = async (e) => {\n      const uploader = new ImageUploader(e.target.files[0], `${getTimestampImageString()}.jpg`);\n      await uploader.sendImageToFirebaseStorage();\n    }\n\n    render(){\n\n      let images = this.state.imageLinks.map(link => <img src={link} />);\n      let cards = this.state.imageLinks.map(link => <HomepageCard imageLink={link} />);\n\n        return(\n<div>\n  {this.state.message}\n<br></br>\n<input type=\"file\" onChange={this.uploadFile} accept=\"image/*\"></input>\n<CardColumns>\n  {cards}\n</CardColumns>\n</div>\n        );\n    }\n}\nexport default HomePage;\n"]},"metadata":{},"sourceType":"module"}